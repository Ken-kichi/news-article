## はじめに

記事を書いたら、AIが自動で動画にしてくれます。
脚本・画像・音声・粗編集まで、全部です。
使っているのはLangGraphというAIエージェントの仕組みで、記事を渡すだけで映像の素材が揃っていきます。
台本も、画像も、ナレーション音声も、粗編集まで自動で出ててきます。
やるのは仕上げだけ。
これが本当に快適なんです。
仕上げはCanvaでテロップを合わせて、BGMと効果音を重ねるだけ。
AIの成果物に自分の感性を足して動画を作成するのがたまらないです。
最後はYouTube Studioで調整して公開完了。
今日はその全工程を、一から全部見せていきます。

## プロジェクトフォルダの作成

まずはプロジェクトの土台作りから始めます。
新しいフォルダを作ります。
フォルダ内を初期化して、仮想環境を作成します。
必要なライブラリをまとめてインストールしています。

フォルダの中には、記事の原稿用、動画の素材用、完成データ用と、3つのディレクトリを先に作っておきます。
また、ファイルも事前に作っておきます。
APIキーを管理するファイルも今のうちに用意しておきます。


## Azure Portalでのリソース構築

次はブラウザに切り替えて、Azureのポータル画面を表示します。
AI Foundryの音声サービスを使って音声を生成します。
リソースグループを新規作成します。
他のリソースもこのグループで作成していきます。
リージョンはアメリカにしておくと日本にした時と比べて使えるAIモデルが多くなります。
続いてAzure AI Foundryを作成していきます。
Azure AI FoundryはMicrosoftが提供する生成AIアプリケーションとAIエージェントの開発・運用を一元管理する統合プラットフォームです。
1,800以上の最新AIモデルにアクセスし、比較・検証ができます。

続いてモデルのギャラリーから、脚本生成用のGPTと、画像生成用のFluxをそれぞれデプロイします。
gpt-4.1は他のモデルよりもAPI使用料が安く設定され、ある程度の細かい要約のルールを理解した文章を出力してくれます。
Fluxは構図の指定に強くて、ニュース系の落ち着いたカットも違和感なく出せます。

リソースを作る時、リージョンによっては使えないモデルがあります。
特に画像生成モデルは対応リージョンが限られているので、デプロイ前に確認しておくと安心です。
デプロイしたモデルのAPIキーなどを環境変数ファイルに設定します。
APIキーを直接書くと、GitHubに保存した際に履歴として残り続け、後で消しても盗み見られるリスクがあります。


## 設定管理コードの実装

エディタに戻って、設定管理のコードを書いていきます。
AzureエンドポイントURLからベースURLとAPIバージョンを自動抽出・正規化するコードを書きます。
ポータルからコピーした複雑なURLでも、安全に扱えるように整形します。
各種エンドポイントの正規化処理をします。
アプリケーション全体の設定を一元管理するクラスを設定します。
各ノードはこのクラスを通じて型安全に設定値へアクセスできます。

## 状態管理の定義

次は、LangGraphのノード間でやり取りするデータ構造を定義するファイルです。
ここで扱うデータの型をしっかり決めておきます。

型を定義しておくと、存在しないキーがあったときは事前に教えてくれます。

## 処理ノードの実装

いよいよ各処理のノードを実装していきます。
ノードというのは、グラフの中の処理の単位で、それぞれが一つの仕事だけを担当するイメージです。

ノードのメタデータをJSON行として現在の実行ディレクトリへ追記します。
Markdown本文で最初の非空行を見出しとして取得し、人が読めるタイトルを返します。
設定済みのmovieディレクトリから利用可能な背景動画を収集します。
日付の形式を変更します。
日付範囲の表現を作成します。
ハッシュタグとして使えるようにテキストを正規化します。
記事タイトルから派生させたハッシュタグの短いリストを生成します。
エージェント状態からYouTube向けのタイトル・説明文・ハッシュタグを組み立てます。
タイムスタンプ文字列を生成します。
ナレーション文章を字幕用に分割します。
文章と想定尺から疑似タイミング付きの字幕を生成します。
Markdown記事を読み込み、ナレーション向けに要約します。
各記事のナレーション音声と字幕ファイルを生成します。
記事ごとに解説用イラストのプロンプトと画像を生成します。
生成済みの静止画・ストック映像・ナレーション音声を結合し短尺動画を作ります。
YouTube投稿用のタイトル・説明文・ハッシュタグを整備します。
これでノードの実装が完了しました。


## グラフ定義コード

グラフ定義のファイルを見てみましょう。
LangGraphのStateGraphという仕組みで、さっき作ったノードを読み込み→脚本→画像→音声→動画合成→字幕→仕上げの順で直列に繋ぎます。

## メインプログラムの実装
メインファイルを実装します。
同名ディレクトリが存在する場合、バージョン管理できるようにします。
引数の日付から該当の記事を取得できるようにします。
日付から記事を特定してYouTube Shorts素材をまとめて出力できるコマンドを実装します。
これでコマンドを入れるだけで動画素材ができるようになりました。


## プログラムを実行
プログラム実行に向けて素材を準備します。
動画にしたい記事をarticleフォルダに入れます。
記事のファイル名は年月日を先頭に記載しておいてください。
続いて、挿入する動画をダウンロードします。
今回はIT関連の記事なのでデジタルがテーマの動画を中心にダウンロードします。
動画はmovieフォルダに入れます。
動画は20本以上入れておきましょう。
準備が完了したらコマンドを実行しましょう。
コマンドラインから日付を指定して実行すると、読み込み・脚本生成・画像生成・音声合成・動画合成・字幕出力まで一気に走ります。
テロップで処理の流れを表示しているので、今はどの工程が処理されているのかが分かりやすくなっています。
動画の合成にかかる時間は動画の長さと同じくらいなので、今回の動画では倍速でお見せしています。
処理が完了するとoutputフォルダ内に素材が出力されます。
これらの素材を使って動画を制作していきます。

## Canvaで動画制作

ここからはCanvaでYoutube Shortを作成する方法を解説します。

まずフリー音源サイトでBGMを用意します。
YouTubeでよく使われている曲を選ぶと、著作権チェックにも引っかかりにくいです。
効果音もフリー素材のサイトからダウンロードします。

Canvaの縦型テンプレートを使って動画を制作します。
生成した素材をアップロードします。

タイムラインに素材を並べて、クリップの幅をドラッグして表示時間を調整します。
音声も同じようにドラッグで長さを変えられるので、BGMと効果音の開始・終了を細かく合わせていきます。

クラウド編集は短い動画なら十分ですが、長尺になるとPremiere ProやDaVinci Resolveの方が安定します。
その辺りもテロップで補足しています。
音声オフで見る方のためにテキストを挿入します。
テキストボックスは半透明にして、タイトルは記事のタイトルをそのまま流用します。
ナレーション部分は小見出しスタイルで画面上部に置くと、YouTube Shortでチャンネル名と被らなくて済みます。
動画下の音声を再生して、内容に合った文章を生成したメタ情報から取得して見出しに追加していきます。
CanvaはWebブラウザで直感的にYouTubeショート用の動画が作成できるので、動画デビューに最適です。
テンプレートやストック素材、アニメーションが無料で使えるので簡単にいい感じの動画が作りやすいです。
動画が作れると、技術ブログ用に作成した構成図やアーキテクチャ図に動きを付け加えられてたりするのでより伝わりやすい情報発信ができるようになります。
また、動画は音声やアニメーションを加えることができるので、技術ブログに馴染みがない層や通勤中や家事中に流し聞きしたい人にアプローチできます。
さらに、動画制作技術はコードが書けるだけではなく、分かりやすくアプトプットできるスキルの証明にもなります。
最後にBGMの音量を大きく下げて、終わりの少し前からフェードアウトします。
これで映像と音が気持ちよく締まります。
編集が終わったらMP4で書き出して、Shorts用の素材が完成です。



## YouTubeで動画を公開

「ラストはYouTube Studioです。
出来上がった動画ファイルをアップロードします。
説明欄にはプログラムが生成してくれたサマリーをそのまま貼って、必要であれば元記事のURLや関連リンクを足します。

設定画面では言語を日本語にしておくと、自動翻訳が安定して海外の視聴者にもリーチしやすくなります。
Shortsなら関連動画も指定できるので、見てほしい動画を紐づけておきましょう。
字幕ファイルはアップロードで追加して完了です。


公開設定を選択し、公開ボタンを押せば配信完了です。
記事から動画まで、一気通貫のワークフローが締まりました。


Shortsは投稿後の最初の1〜2時間でアルゴリズムに評価されやすいと言われています。
フォロワーが活発な時間帯に合わせて予約投稿するだけで、初動の再生数が変わってくることがあります。


サムネイルは自動生成のままにせず、必ず手動で設定しましょう。
自動サムネイルは中途半端なフレームが選ばれることが多くて、クリック率に直結します。
Canvaでサムネイルを1枚作っておくだけで、印象がかなり変わります。

## おわりに

というわけで今回は、AIに下準備を任せながらクリエイティブな部分は自分で仕上げる、というワークフローをご紹介しました。
自身が持っているプログラミングの知識とCanvaのようなツールを組み合わせることで多方面に活躍できる人材になれます。
記事の投稿に集中しながら幅広い層に記事の魅力を伝えられるチャンスです！
ぜひ技術ブログをいろんなヒトに届けてみましょう！
それでは次の動画でお会いしましょう！

実装のポイントとして、LangGraphによる状態管理と処理フローの明確化、Azure AIサービスの効果的な組み合わせ、コスト最適化のための技術選定、実用性を高めるための細かな工夫があります。

このシステムは、ブログ記事を書くだけでYouTubeコンテンツの素材も自動生成されるという、効率的なワークフローを実現します。

完成品にするには追加の編集作業が必要ですが、それでも記事執筆に集中しながら、動画という新しいチャネルで視聴者にリーチできる大きなメリットがあります。

記事執筆とYouTube運営の両立に悩んでいる方は、ぜひこのシステムを試してみてください。
